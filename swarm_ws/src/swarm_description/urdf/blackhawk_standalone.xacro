<?xml version="1.0"?>
<robot name="blackhawk" xmlns:xacro="http://ros.org/wiki/xacro">

  <!-- Values for different components of the robot-->
  <xacro:property name="wheel_mass" value="0.00368"/>
  <xacro:property name="wheel_separation" value="0.018"/> <!-- side by side separation from center -->
  <xacro:property name="wheel_diameter" value="0.028"/>
  <xacro:property name="wheel_width" value="0.005"/>
  <xacro:property name="wheel_standoff" value="0.0055"/> <!-- forward/backward offset from center -->
  <xacro:property name="body_mass" value="0.19044"/> <!-- weighed bot = 0.19784; subtract wheels (2*wheel_mass) -->
  <xacro:property name="body_length" value="0.0766"/>
  <xacro:property name="body_width" value="0.0697"/>

  <xacro:property name="PI" value="3.1415926535897931"/>

  <xacro:include filename="$(find swarm_description)/urdf/macros.xacro"/>

  <!-- This is here to give RVIS a fixed global frame -->
  <!-- <link name="map"/>

  <joint name="map_to_base_link" type="fixed">
    <child link="base_link"/>
    <parent link="map"/>
    <origin xyz="0 0 0.0305" rpy="0 0 0"/>
  </joint> -->

  <!-- Main link for the robot_description -->

  <link name="base_link">
    <!-- visual -->
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
	    <xacro:body/>
    </visual>

    <!-- inertial & collision -->
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
        <xacro:body/>
      </collision>

    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <xacro:body_inertial/>
    </inertial>
  </link>

  <!-- Wheel geometries -->
  <link name="left_wheel">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <xacro:wheel_geometry/>
      <material name="black">
        <color rgba="0.0 0.0 0.0 1.0"/>
      </material>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <xacro:wheel_geometry/>
    </collision>

    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <xacro:wheel_inertial/>
    </inertial>
  </link>

  <link name="right_wheel">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <xacro:wheel_geometry/>
      <material name="black">
        <color rgba="0.0 0.0 0.0 1.0"/>
      </material>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <xacro:wheel_geometry/>
    </collision>

    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <xacro:wheel_inertial/>
    </inertial>
  </link>

  <!-- wheel joints -->
  <joint name="base_link_to_left_wheel" type="continuous">
    <origin xyz="${wheel_standoff} -${wheel_separation} -0.017" rpy="${PI/2} 0 0" />
    <child link="left_wheel" />
    <parent link="base_link" />
    <axis xyz="0 0 1"/>
  </joint>

  <joint name="base_link_to_right_wheel" type="continuous">
    <origin xyz="-${wheel_standoff} ${wheel_separation} -0.017" rpy="-${PI/2} 0 0" />
    <child link="right_wheel"/>
    <parent link="base_link"/>
    <axis xyz="0 0 1"/>
  </joint>

  <!-- Using separate file to set up Gazebo properties and plugins -->
  <xacro:include filename="$(find swarm_description)/urdf/blackhawk_standalone.gazebo"/>

  <!-- Setting up transmissions for differential driving -->
  <xacro:mk_transmission joint="base_link_to_right_wheel"/>
  <xacro:mk_transmission joint="base_link_to_left_wheel"/>

</robot>
